{% if no_fuzzy_time -%}
  {% set no_fuzzy_time_str = "&amp;no_fuzzy_time=" + no_fuzzy_time -%}
{% else -%}
  {% set no_fuzzy_time_str = "" -%}
{% endif -%}
{% set cycle_str = entry.cycle|replace('+', '%2B') -%}
<div class="row entry"><!-- entry row -->
  <div class="col-xs-6 col-sm-1 col-md-1 col-lg-1">
    <!-- entry: task status, submit_num -->
    {% if entry.task_status == "succeeded" -%}
      {% set icon = "ok" %}
      {% set label_class = "label-success" %}
    {% elif entry.task_status in ["failed", "submission failed"] -%}
      {% set icon = "remove" %}
      {% set label_class = "label-danger" %}
    {% else -%}
      {% set icon = "play" %}
      {% set label_class = "label-info" %}
    {% endif -%}
    {% set link = (
        script ~ "/taskjobs/" ~ user ~ "/" ~ suite ~ "?cycles=" ~
        cycle_str ~ "&amp;tasks=" ~ entry.name ~ no_fuzzy_time_str
    ) -%}
    <a href="{{link}}"
    title="submit {{entry.submit_num}}, task {{entry.task_status}}"
    class="label {{label_class}}">
      <i class="glyphicon glyphicon-{{icon}}"></i>
      {{entry.submit_num}} / {{entry.submit_num_max}}
    </a>
  </div>
  <div class="col-xs-6 col-sm-1 col-md-1 col-lg-1">
    <!-- entry: submit_status, run_status -->
    {% set link = (
        script ~ "/taskjobs/" ~ user ~ "/" ~ suite ~ "?" ~
        no_fuzzy_time_str
    ) -%}
    {% if entry.run_status == 0 -%}
      <a href="{{link}}&amp;job_status=succeeded" class="label label-success">
        <i class="glyphicon glyphicon-ok-circle" title="job succeeded"></i>
      </a>
    {% elif entry.run_status == 1 -%}
      <a href="{{link}}&amp;job_status=failed"
      class="label label-danger">
        <i class="glyphicon glyphicon-remove-circle" title="job failed"></i>
        {% if entry.run_signal and entry.run_signal != "ERR" -%}
          {{entry.run_signal}}
        {% endif -%}
      </a>
    {% elif entry.events[1] -%}
      <a href="{{link}}&amp;job_status=running" class="label label-info">
        <i class="glyphicon glyphicon-play-circle" title="job running"></i>
      </a>
    {% elif entry.submit_status == 0 -%}
      <a href="{{link}}&amp;job_status=submitted" class="label label-info">
        <i class="glyphicon glyphicon-time" title="job submitted"></i>
      </a>
    {% elif entry.submit_status == 1 -%}
      <a href="{{link}}&amp;job_status=submission-failed"
      class="label label-danger">
        <i class="glyphicon glyphicon-remove-sign"
        title="job submission failed"></i>
      </a>
    {% else -%}
      <span class="label label-default">
        <i class="glyphicon glyphicon-info-sign" title="job ready"></i>
      </span>
    {% endif -%}
  </div>
  <div class="col-sm-10 col-md-10 col-lg-10">
    <div class="container-fluid">
      <div class="col-sm-12 col-md-12 col-lg-5">
        <!-- entry: cycle, name, files -->
        {% if entry.cycle != "1" -%}
          <a
          href="{{script}}/taskjobs/{{user}}/{{suite}}?cycles={{cycle_str}}{{no_fuzzy_time_str}}"
          class="cycle" title="{{entry.cycle}}">{{entry.cycle}}</a>
        {% endif -%}
        <a
        href="{{script}}/taskjobs/{{user}}/{{suite}}?tasks={{entry.name}}{{no_fuzzy_time_str}}"
        title="{{entry.name}}">{{entry.name}}</a>
      </div>

      <div class="col-sm-4 col-md-3 col-lg-3">
        <small>
          <i class="glyphicon glyphicon-info-sign" title="Submitted"></i>
          <abbr class="t_submit livestamp"
          title="{{entry.events[0]}}">{{entry.events[0]}}</abbr>
          <!-- entry: submit time -->
        </small>
      </div>
      <div class="col-sm-4 col-md-3 col-lg-2">
        <!-- entry: init time -->
        {% if entry.events[1] -%}
          <small>
            <i class="glyphicon glyphicon-play" title="Started"></i>
            <abbr class="t_init"
            title="{{entry.events[1]}}">{{entry.events[1]}}</abbr>
          </small>
        {% endif -%}
      </div>
      <div class="col-sm-4 col-md-6 col-lg-2">
        <!-- entry: exit time -->
        {% if entry.events[2] -%}
          <small>
            <i class="glyphicon glyphicon-stop" title="Exited"></i>
            <abbr class="t_exit"
            title="{{entry.events[2]}}">{{entry.events[2]}}</abbr>
          </small>
        {% endif -%}
        <!-- entry: exit time -->
      </div>
      <div class="clearfix"></div>

      <div class="col-sm-4 col-md-3 col-lg-2">
        <!-- entry: host, submit_method and submit_method_id -->
        {% if entry.host -%}
          <small>
            <i class="glyphicon glyphicon-map-marker" title="Location"></i>
           {{entry.host}}
         </small>
       {% endif -%}
      </div>
      <div class="col-sm-4 col-md-3 col-lg-3">
        {% if entry.submit_method -%}
          <small>
            <i class="glyphicon glyphicon-cloud" title="Scheduler"></i>
            {{entry.submit_method}}
            {% if entry.submit_method_id -%}
              {{entry.submit_method_id}}
            {% endif -%}
          </small>
        {% endif -%}
      </div>

      <div class="col-sm-12 col-md-12 col-lg-7">
        <small>
          {% if entry.logs -%}
            <ul class="list-inline">
              {% for key, log in entry.logs|dictsort if not log.seq_key -%}
                <li>
                  {% if log.exists -%}
                    {% if log.path_in_tar -%}
                      {% if path_in_tar is defined and path_in_tar == log.path_in_tar -%}
                        {{key}}
                      {% else -%}
                        <a
                        {% if log.size == "?" or not log.size -%}class="text-muted"{% endif -%}
                        href="{{script}}/view/{{user}}/{{suite}}?path={{log.path|replace('+', '%2B')}}&amp;path_in_tar={{log.path_in_tar|replace('+', '%2B')}}"
                        title="{{log.size}} bytes">{{key}}{% if log.size == "?" -%}?{% endif -%}</a>
                      {% endif -%}
                    {% else -%}
                      {% if path is defined and path == log.path -%}
                        {{key}}
                      {% else -%}
                        <a
                        {% if log.size == "?" or not log.size -%}class="text-muted"{% endif -%}
                        href="{{script}}/view/{{user}}/{{suite}}?path={{log.path|replace('+', '%2B')}}"
                        title="{{log.size}} bytes">{{key}}{% if log.size == "?" -%}?{% endif -%}</a>
                      {% endif -%}
                    {% endif -%}
                  {% else -%}
                        <del class="text-muted" title="{{log.size}} bytes, gone">{{key}}</del>
                  {% endif -%}
                </li>
              {% endfor -%}
              {% for seq_key, indexes in entry.seq_logs_indexes|dictsort -%}
                <li>
                  <form action="{{script}}/view" class="form-inline">
                    <input type="hidden" name="user" value="{{user}}"/>
                    <input type="hidden" name="suite" value="{{suite}}"/>
                    {% if entry.logs[indexes.values()|first].path_in_tar -%}
                      <input type="hidden" name="path"
                      value="{{entry.logs[indexes.values()|first].path}}"/>
                      <select class="seq_log" name="path_in_tar">
                        <option disabled="disabled"
                        selected="selected">{{seq_key}}</option>
                        {% for index, key in indexes|dictsort -%}
                          {% set log = entry.logs[key] -%}
                          <option title="{{log.size}} bytes"
                          value="{{log.path_in_tar}}">{{key}}</option>
                        {% endfor -%}
                      </select>
                    {% else -%}
                      <select class="seq_log" name="path">
                        <option disabled="disabled"
                        selected="selected">{{seq_key}}</option>
                        {% for index, key in indexes|dictsort -%}
                          {% set log = entry.logs[key] -%}
                          <option title="{{log.size}} bytes"
                          value="{{log.path}}">{{key}}</option>
                        {% endfor -%}
                      </select>
                    {% endif -%}
                  </form>
                </li>
              {% endfor -%}
            </ul>
          {% endif -%}<!-- entry.logs -->
        </small>
      </div>
    </div>
  </div>
</div><!-- entry row -->
